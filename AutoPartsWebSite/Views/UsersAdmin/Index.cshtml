@model IEnumerable<IdentityAutoPart.Models.ApplicationUser>
@using IdentityAutoPart.Models;
@using Microsoft.AspNet.Identity;
@using Microsoft.AspNet.Identity.Owin;

@{
    ViewBag.Title = "Пользователи";
}

<h2>Список пользователей</h2>

<p>
    @Html.ActionLink("Новый пользователь", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.UserName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Phone)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MoneyLimit)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SearchLimit)
        </th>
        <th>
            @Html.DisplayName("Роли")
        </th>
        <th>

        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.UserName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FullName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Phone)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MoneyLimit)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SearchLimit)
            </td>
            <td>              

                @if (item.Roles.Count > 0)
                {                    
                    @item.Roles.Count                        
                }                
            </td>
            <td>                
                @Html.ActionLink("Изменить", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Просмотр", "Details", new { id = item.Id }) |
                @Html.ActionLink("Удалить", "Delete", new { id = item.Id }) |
                @using (Html.BeginForm("IndexUser", "Payments", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    @Html.Hidden("id", item.Id)
                    @*@Html.Hidden("returnUrl", Request.Url.PathAndQuery)*@
                    <input type="submit" value="Платежи" class="btn btn-default" />
                }
            </td>
        </tr>
    }

</table>
